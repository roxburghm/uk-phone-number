var UKPhone = (() => {
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };

  // src/data.json
  var require_data = __commonJS({
    "src/data.json"(exports, module) {
      module.exports = { "0": { "1": { "1": { "3": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } } }, "4": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } } }, "5": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } } }, "6": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } } }, "7": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } } }, "8": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } } }, _rule: { b: [3, 3, 4] } }, "2": { "0": { "4": { "6": { "1": { _rule: { b: [4, 5] } }, "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } }, "4": { _rule: { b: [4, 5] } } } }, "8": { "7": { "1": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } } }, "1": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, _rule: { b: [3, 3, 4] } }, "5": { "4": { "5": { "0": { _rule: { b: [4, 6] } }, "8": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } } }, "7": { "6": { "2": { _rule: { b: [4, 5] } }, "3": { "0": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "6": { "0": { _rule: { b: [4, 6] } }, "7": { _rule: { b: [4, 6] } }, "8": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } } }, "9": { "7": { "2": { "5": { _rule: { b: [4, 6] } }, "7": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "3": { "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } }, "4": { _rule: { b: [4, 5] } }, "5": { _rule: { b: [4, 5] } } } }, "8": { "2": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "7": { "5": { _rule: { b: [4, 6] } }, "6": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "8": { "3": { _rule: { b: [4, 5] } }, "4": { _rule: { b: [4, 5] } }, "5": { _rule: { b: [4, 5] } } } } } }, "3": { "1": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, _rule: { b: [3, 3, 4] } }, "6": { "3": { "8": { "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } }, "4": { _rule: { b: [4, 5] } }, "5": { _rule: { b: [4, 5] } } } }, "4": { "7": { "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } } } } }, "8": { "4": { "7": { "1": { _rule: { b: [4, 6] } }, "2": { _rule: { b: [4, 6] } }, "3": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } }, "6": { "4": { "2": { _rule: { b: [4, 6] } }, "3": { _rule: { b: [4, 6] } }, "4": { _rule: { b: [4, 6] } }, "6": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } }, "7": { "3": { _rule: { b: [5, 5] } } } } }, "4": { "0": { "4": { "4": { "0": { _rule: { b: [4, 6] } }, "8": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } } }, "1": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, _rule: { b: [3, 3, 4] } }, "2": { "0": { "2": { "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } } }, "8": { _rule: { b: [4, 5] } } } }, "6": { "0": { "3": { "0": { _rule: { b: [4, 5] } } }, "5": { "1": { _rule: { b: [4, 6] } }, "6": { _rule: { b: [4, 6] } }, "8": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "6": { "0": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "7": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } }, "1": { "4": { "0": { _rule: { b: [4, 5] } } } } }, "8": { "0": { "5": { "2": { _rule: { b: [4, 5] } } } }, "8": { "7": { "1": { _rule: { b: [4, 5] } }, "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } } } } } }, "5": { "1": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, _rule: { b: [3, 3, 4] } }, "2": { "4": { "2": { "0": { _rule: { b: [4, 6] } }, _rule: { b: [5, 5] } }, "3": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, "8": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "6": { _rule: { b: [4, 5] } } }, "7": { "6": { _rule: { b: [4, 5] } } } }, "3": { "9": { "4": { _rule: { b: [5, 5] } }, "5": { _rule: { b: [5, 5] } }, "6": { _rule: { b: [5, 5] } } } }, "6": { "2": { "6": { "1": { _rule: { b: [4, 6] } }, "2": { _rule: { b: [4, 6] } }, "3": { _rule: { b: [4, 6] } }, "4": { _rule: { b: [4, 6] } }, "5": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } }, "6": { "8": { "6": { _rule: { b: [4, 5] } } } } } }, "6": { "0": { "6": { "4": { _rule: { b: [4, 5] } }, "7": { "4": { _rule: { b: [4, 5] } }, "5": { _rule: { b: [4, 5] } }, "6": { _rule: { b: [4, 5] } }, "7": { _rule: { b: [4, 5] } }, "9": { _rule: { b: [4, 5] } } } } }, "1": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, _rule: { b: [3, 3, 4] } }, "2": { "9": { "5": { "5": { _rule: { b: [4, 5] } }, "6": { _rule: { b: [4, 5] } }, "7": { _rule: { b: [4, 5] } } } } }, "3": { "5": { "3": { _rule: { b: [4, 5] } }, "4": { _rule: { b: [4, 5] } } } }, "4": { "7": { "2": { "4": { _rule: { b: [4, 5] } } }, "6": { "1": { _rule: { b: [4, 5] } } } } }, "5": { "9": { "5": { "0": { _rule: { b: [4, 5] } }, "8": { _rule: { b: [4, 5] } } }, "6": { "6": { _rule: { b: [4, 5] } }, "7": { _rule: { b: [4, 5] } } }, "7": { "4": { _rule: { b: [4, 5] } } } } }, "9": { "5": { "5": { "5": { _rule: { b: [4, 6] } }, "6": { _rule: { b: [4, 6] } }, "7": { _rule: { b: [4, 6] } }, "8": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } }, "7": { "3": { _rule: { b: [5, 5] } }, "4": { _rule: { b: [5, 5] } }, "7": { "2": { _rule: { b: [5, 4] } }, "3": { _rule: { b: [5, 4] } }, "4": { _rule: { b: [5, 5] } }, "5": { _rule: { b: [5, 5] } } } } } }, "7": { "2": { "6": { "6": { "0": { _rule: { b: [4, 6] } }, "2": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "7": { "8": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } } }, "4": { "4": { "2": { _rule: { b: [4, 5] } } } }, "5": { "0": { "2": { "4": { _rule: { b: [4, 6] } }, "6": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "3": { "2": { _rule: { b: [4, 5] } } }, "4": { "2": { _rule: { b: [4, 5] } } }, "5": { "2": { _rule: { b: [4, 5] } } }, "6": { "2": { _rule: { b: [4, 5] } } }, "7": { "6": { _rule: { b: [4, 5] } } }, "8": { _rule: { b: [4, 5] } } } }, "6": { "8": { "3": { _rule: { b: [5, 5] } }, "4": { _rule: { b: [5, 5] } }, "7": { _rule: { b: [5, 5] } } } } }, "8": { "2": { "7": { "5": { _rule: { b: [4, 5] } }, "6": { _rule: { b: [4, 5] } } } }, "3": { "7": { "5": { "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } }, "4": { _rule: { b: [4, 5] } }, "5": { _rule: { b: [4, 5] } } }, "8": { "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } }, "9": { _rule: { b: [4, 5] } } } } }, "8": { "4": { "3": { "0": { _rule: { b: [4, 6] } }, "6": { _rule: { b: [4, 6] } }, "7": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } } } } }, "9": { "0": { "0": { "6": { "0": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "8": { "5": { _rule: { b: [4, 5] } } } }, "5": { "2": { _rule: { b: [4, 5] } } } }, "1": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, _rule: { b: [3, 3, 4] } }, "3": { "5": { "8": { "3": { _rule: { b: [4, 5] } } } } }, "4": { "6": { "6": { "0": { _rule: { b: [4, 6] } }, "9": { _rule: { b: [4, 6] } }, _rule: { b: [4, 5] } }, "7": { _rule: { b: [5, 5] } } }, "9": { "2": { "0": { _rule: { b: [4, 5] } }, "1": { _rule: { b: [4, 5] } } }, "8": { "1": { _rule: { b: [4, 5] } } } } }, "6": { "3": { "2": { "3": { _rule: { b: [4, 5] } } }, "3": { "1": { _rule: { b: [4, 5] } }, "2": { _rule: { b: [4, 5] } }, "3": { _rule: { b: [4, 5] } }, "4": { _rule: { b: [4, 5] } } } } }, "9": { "5": { "6": { "1": { _rule: { b: [4, 5] } } } } } }, _rule: { b: [4, 6] } }, "2": { "0": { "0": { _rule: { b: [4, 6] } }, "1": { _rule: { b: [4, 6] } }, _rule: { b: [2, 4, 4] } }, "3": { "8": { _rule: { b: [2, 4, 4] } }, "9": { _rule: { b: [2, 4, 4] } } }, "4": { "7": { _rule: { b: [2, 4, 4] } } }, "8": { "1": { _rule: { b: [4, 6] } }, _rule: { b: [2, 4, 4] } }, "9": { "2": { _rule: { b: [2, 4, 4] } } }, _rule: { b: [4, 6] } }, "7": { _rule: { b: [4, 6] } } }, _meta: { url: "https://www.ofcom.org.uk/siteassets/resources/documents/phones-telecoms-and-internet/information-for-industry/numbering/regular-updates/telephone-numbers/codelist.zip?v=410719", date: "2026-01-12T11:51:34.000Z", timestamp: 1768218694e3 }, _rule: { b: [3, 3, 4] } };
    }
  });

  // package.json
  var require_package = __commonJS({
    "package.json"(exports, module) {
      module.exports = {
        name: "uk-phone-number",
        version: "1.0.3",
        main: "index.js",
        scripts: {
          test: "jest",
          "update-data": "node scripts/update-data.js",
          build: "esbuild src/index.js --bundle --outfile=dist/uk-phone.js --global-name=UKPhone --platform=browser",
          "build:min": "esbuild src/index.js --bundle --minify --sourcemap --format=iife --global-name=UKPhone --outfile=dist/uk-phone.min.js",
          inspect: "node scripts/inspect.js",
          prepublishOnly: "npm run update-data && npm run build && npm run build:min"
        },
        keywords: [],
        author: "Matt Roxburgh",
        license: "MIT",
        description: "",
        dependencies: {},
        devDependencies: {
          "adm-zip": "^0.5.16",
          "csv-parse": "^6.1.0",
          enquirer: "^2.4.1",
          jest: "^30.2.0",
          esbuild: "^0.27.2"
        }
      };
    }
  });

  // src/index.js
  var require_index = __commonJS({
    "src/index.js"(exports, module) {
      var rules = require_data();
      var GENERIC_RULES = {
        // 01: Geographic. Usually [4, 6] or [3, 7] etc. 
        // Defaulting to widely compatible [4, 6] (01xx xxx xxxx) or [5, 5]?
        // Most 01 are 01xxx. Let's use [4, 6] as safe fallback for "Standard Geographic".
        // Or better: [4, 6] -> 10 len. 011x is [3, 7].
        // Let's use [5, 5] (01xxx xxxxx)? 
        // Actually [4, 6] covers 0121, 0131 (3 digits NDC? 0+3).
        // 0121 is 0121 xxx xxxx.
        // Let's default 01 to [4, 6].
        "01": { b: [4, 6] },
        "02": { b: [2, 4, 4] },
        "03": { b: [3, 3, 4] },
        "05": { b: [3, 3, 4] },
        "07": { b: [4, 6] },
        "08": { b: [3, 3, 4] },
        "09": { b: [3, 3, 4] }
      };
      function clean(number) {
        if (!number) return "";
        let cleaned = number.replace(/[^0-9+]/g, "");
        return cleaned;
      }
      function validate(number) {
        const cleaned = clean(number);
        let digits = cleaned;
        if (digits.startsWith("+44")) {
          digits = digits.substring(3);
        }
        let candidates = [];
        if (!digits.startsWith("0")) {
          candidates.push("0" + digits);
          if (digits.startsWith("1")) candidates.push(digits);
        } else {
          candidates.push(digits);
        }
        let bestRule = null;
        let matchedPrefix = "";
        let usedDigits = "";
        let matchMethod = "none";
        let foundSpecificRule = false;
        for (const cand of candidates) {
          let node = rules;
          let p = "";
          let rule = null;
          for (let i = 0; i < cand.length; i++) {
            const char = cand[i];
            if (node[char]) {
              node = node[char];
              p += char;
              if (node._rule) {
                rule = node._rule;
                foundSpecificRule = true;
              }
            } else {
              break;
            }
          }
          if (rule) {
            let expectedLen = 0;
            const sumBlocks = rule.b.reduce((a, v) => a + v, 0);
            if (cand.startsWith("0")) {
              expectedLen = 1 + sumBlocks;
            } else {
              expectedLen = sumBlocks;
            }
            if (cand.length === expectedLen) {
              bestRule = rule;
              matchedPrefix = p;
              usedDigits = cand;
              matchMethod = "exact";
              break;
            }
          }
        }
        if (!bestRule && !foundSpecificRule) {
          let stdCand = candidates.find((c) => c.startsWith("0"));
          if (!stdCand && digits.length >= 9) stdCand = "0" + digits;
          if (stdCand) {
            const p2 = stdCand.substring(0, 2);
            if (GENERIC_RULES[p2]) {
              const rule = GENERIC_RULES[p2];
              const sumBlocks = rule.b.reduce((a, v) => a + v, 0);
              const expectedLen = 1 + sumBlocks;
              if (stdCand.length === expectedLen) {
                bestRule = rule;
                usedDigits = stdCand;
                matchedPrefix = p2;
                matchMethod = "fallback";
              }
            }
          }
        }
        if (!bestRule) {
          return {
            valid: false,
            prefixLength: 0,
            formatted: number,
            formattedInternational: { short: "", long: "" },
            rule: null,
            matchMethod: "none"
          };
        }
        const blocks = bestRule.b;
        let form = "";
        let rawIndex = 0;
        let parts = [];
        if (usedDigits.startsWith("0")) {
          rawIndex = 1;
        }
        let firstBlockPart = "";
        if (usedDigits.startsWith("0")) firstBlockPart += "0";
        for (let i = 0; i < blocks.length; i++) {
          const blkLen = blocks[i];
          const chunk = usedDigits.substring(rawIndex, rawIndex + blkLen);
          if (i === 0) {
            firstBlockPart += chunk;
            parts.push(firstBlockPart);
          } else {
            parts.push(chunk);
          }
          rawIndex += blkLen;
        }
        const formattedLocal = parts.join(" ").trim();
        const prefixLength = blocks[0];
        let formattedIntlShort = "";
        let formattedIntlLong = "";
        if (usedDigits.startsWith("0")) {
          const p1 = parts[0];
          const p1_no0 = p1.substring(1);
          const rest = parts.slice(1).join(" ");
          formattedIntlShort = `+44 ${p1_no0} ${rest}`.trim();
          formattedIntlLong = `+44 (0) ${p1_no0} ${rest}`.trim();
        } else {
          formattedIntlShort = `+44 ${formattedLocal}`;
          formattedIntlLong = formattedIntlShort;
        }
        return {
          valid: true,
          prefixLength,
          formatted: formattedLocal,
          formattedInternational: {
            short: formattedIntlShort,
            long: formattedIntlLong
          },
          rule: bestRule,
          matchMethod
        };
      }
      function getDataInfo() {
        return rules._meta || {};
      }
      var { version } = require_package();
      module.exports = {
        validate,
        getDataInfo,
        version
      };
    }
  });
  return require_index();
})();
